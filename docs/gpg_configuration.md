# Guide for installing and configuring a GPG key

---
GPG (GnuPG) keys are cryptographic tools that allow you to encrypt and decrypt data, digitally sign messages, and verify
the authenticity of other data. Implementing a GPG key on an internal server adds a crucial layer of security by protecting
confidential information and ensuring the integrity of communications.

This detailed guide will provide you with the steps necessary to install and configure a GPG key on an internal server. 
Clear and concise instructions are included, as well as practical examples to ensure a complete understanding of the process.
## Installation and/or Update

To install and use the tool, follow these steps:
1. Update the system
```bash  
  sudo apt update -y
```
2. Install the application and dependencies
```bash  
  sudo apt install gnupg
```

```bash  
  sudo apt install rng-tools
```  
## Key generation

To generate the keys for using the application, generate the key as follows:
1. Connect to the server to be used via ssh
2. Type the following command in the terminal to generate the key and select **option 1**:
```bash  
  gpg --full-generate-key
```  
**Output**
```  
gpg (GnuPG) 2.2.19; Copyright (C) 2019 Free Software Foundation, Inc. This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law.  
Please select what kind of key you want:
(1) RSA and RSA (default)  
(2) DSA and Elgamal(3) DSA (sign only)  
(4) RSA (sign only)  
(14) Existing key from cardYour selection?
```

2. It will then ask for the bit size to create the key, and you must type **4096**

**Output**
```  
RSA keys may be between 1024 and 4096 bits long. What keysize do you want? (3072) 
```  
3. The application will ask for the key validity period, and you must type **1y**:

**Output**
```  
Please specify how long the key should be valid.
	0 = key does not expire
    <n> = key expires in n days
    <n>w = key expires in n weeks
    <n>m = key expires in n months
    <n>y = key expires in n yearsKey is valid for? (0)  
```  
*Note: GPG will ask for confirmation of the key expiry time*

4. Next, the author's details will be requested. You can enter the customer's name or a hash generated by  
   software.

**Output**
```
GnuPG needs to construct a user ID to identify your key.  
Real name:
Email address:
Comment:  
```  

* Example with the customer's name

```  
Real name: jane doe
Email address: jane_doe@mail.com
Comment:  decryptor
```  

*Note: The email and comments fields must be left blank*

5. Confirm the changes to create the key and confirm with the letter **O**.

**Output**
```  
You selected this USER-ID:jane doe  
  
Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit?  
```  

6. You must enter the passphrase to match the key:

7. Confirmation and completion of the process

**Output**
```  
We need to generate a lot of random bytes. It is a good idea to perform some other action (type on the keyboard, move the mouse, utilise the disks) during the prime generation; this gives the random number  
generator a better chance to gain enough entropy.  
We need to generate a lot of random bytes. It is a good idea to perform  
some other action (type on the keyboard, move the mouse, utilise the  
disks) during the prime generation; this gives the random number  
generator a better chance to gain enough entropy.  
gpg: key 74CBBFDD57C845B7 marked as ultimately trusted  
gpg: directory “/home/user/.gnupg/openpgp-revocs.d” created  
gpg: revocation certificate stored as '/home/user/.gnupg/openpgp-revocs.d/D973B16440A3CDF22BE5AB7B74CBBFDD57C845B7.rev'  
public and secret key created and signed.  

pub rsa4096 2023-07-19 [SC] [expires: 2024-07-26]  
D973B16440A3CDF22BE5AB7B74CBBFDD57C845B7  
uid jane doe (decryptor) <>  
sub rsa4096 2023-07-19 [E] [expires: 2024-07-26]  
```  
## Export keys

You need to provide the public key and also the corresponding private key. GPG uses a public key (asymmetric) 
cryptography approach, which means that both a public key and a private key are needed to perform encryption and 
decryption. **The public key is used to encrypt files, while the private key is used to decrypt them.* * To export the 
keys, follow these steps.

1. Type the following command with the username:
```bash  
  gpg --export-secret-key -a jane doe  > jane_doe_prv.key
```
*Note: The passphrase is required to export the private key*

2. Export the public gpg key to a file
```bash  
  gpg --export -a Accounts jane doe > jane_doe_pub.key
```

## Importing keys
To import the keys for development or research purposes, follow these steps.

1. To import the private key, follow these instructions:
```bash  
  gpg --import jane_doe_priv.key
```

2. To import the public key, follow these instructions:
```bash  
  gpg --import jane_doe_pub.key
```
*Note: The passphrase is required to import the public key*

--------

* Back to [start]

<div align="center"> 
  <p>
    Made &#x2692;&#xfe0f; with &hearts; by Gussy &#x2693;  |  CXC 2020-2025
  </p>
</div>

<!-- Start of links in this document -->
[start]: ../README.md
<!-- End of links in this document -->